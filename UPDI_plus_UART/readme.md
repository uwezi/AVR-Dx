# UPDI
The new AVR chips use a single-wire serial programming interface UPDI. There are plenty of sources on the web on how to build an avrdude-compatible programmer
using just a standard USB-UART TTL dongle.

But now I took the general idea of my USBasp clone which I had developed for my students about 10 years ago, where the programmer snaps onto the breadboard and 
automatically provides power to the breadboard's side rails as well. As usual I let [PCBgogo](https://www.pcbgogo.com/) manufacture my 2-layer boards and was very satisfied 
with their services.

<img width="672" height="568" alt="image" src="https://github.com/user-attachments/assets/d81acdd6-1bb7-4d86-88f5-67d012e74c1d" />

The design uses the lesser known [CH342K](https://docs.sparkfun.com/SparkFun_RTK_Postcard/assets/component_documentation/CH342%20Datasheet.pdf) 
which can be sourced from LCSC and Aliexpress for about € 1,50 a piece - I found no "western" source for this chip. The chip is similar to the 
CH340-series of USB-UARTs, but it even contains two independent serial ports in a single 10pin SMD package with an exposed pad on the underside, it needs no external oscillator and
it seems to be already supported by all modern operating systems.

<img width="1300" height="707" alt="image" src="https://github.com/user-attachments/assets/684983fd-540c-4f36-9fdc-69b49196f75d" />


## KiCAD 3D rendering
<img width="1569" height="845" alt="image" src="https://github.com/user-attachments/assets/d088a427-184c-41e3-acdc-ba960df3a401" />

## KiCAD view of both front and back layer
<img width="6136" height="2456" alt="image" src="https://github.com/user-attachments/assets/d5e750f2-c559-4e88-9f6d-d164812b02ab" />

## BOM
| Part | Package | Count | Designators | Comment |
|------|---------|-------|-------------|---------|
| 100 nF, ceramic, 15 V | 0805 | 4 | C3, C4, C5, C6 | standard component, e.g. LCSC C519981 |
| 1 µF, ceramic, 25 V   | 0805 | 2 | C1, C2 | standard component, e.g. LCSC C91186 |
| 1 kΩ, ±1%, 250 mW, 1k0        | 0805 | 4 | R4, R5, R6, R7 | standard component, e.g LCSC C6681310 |
| 470 Ω, ±1%, 250 mW, 470R      | 0805 | 1 | R1 | standard component, e.g. LCSC C5120103 |
| 5.1 kΩ, ±1%, 125 mW, 5k1      | 0805 | 2 | R2, R3 | standard component, e.g. LCSC C2907269 |
| LED red               | 0805 | 1 | D7 | standard component, e.g. LCSC C965812 |
| LED blue              | 0805 | 1 | D6 | standard component, e.g. LCSC C965817 |
| LED green             | 0805 | 1 | D5 | standard component, e.g. LCSC C84260 |
| LED yellow            | 0805 | 1 | D4 | standard component, e.g. LCSC C965814 |
| BAT54W                | SOT-323 | 1 | D1 | LCSC C41374260 |
| polyfuse 1A, 16 V     | 1812 | 1 | F1 | eg BSMD1812-110-24V LCSC C883149 |
| AMS1117-33            | SOT-223-3 | 1 | U2 | or similar LCSC C426566 |
| CH342K                | SSOP-10-1EP | 1 | U1 | LCSC C2826608 |
| pin socket 3-pin      | 2.54 mm | 2 | J6, J8 | |
| pin header 3-pin      | 2.54 mm | 1 | J7 | |
| USB-C receptacle      | USB4105 | 1 | J1 | GCT or similar, e.g. LCSC C2765186 |
| pin header 2-pin      | 2.54 mm | 4 | J2, J3, J4, J5 |


## interactive BOM
[generated by the interactive BOM KiCAD plugin](https://html-preview.github.io/?url=https://github.com/uwezi/AVR-Dx/raw/refs/heads/main/UPDI_plus_UART/ibom.html)

# Files
You can find the KiCAD and gerber files in this directory.

There is also an OpenSCAD design and .stl files for a case for the programmer when you do not intend to use it on a breadbaord.

